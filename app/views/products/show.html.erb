<section class="section">
  <div class="container">
    <h1 class="title is-1"><%= @product.name %></h1>
    <div class="field">
      <%= link_to "Add New Module", new_product_product_module_path(@product), class: 'button is-link' %>
    </div>
    <div data-controller="filter">
      <%= form_with url: product_path(@product), method: :get, local: true do |form| %>
        <div class="field has-addons">
          <div class="control">
            <%= form.text_field :search, placeholder: 'Filter Modules...', data: {target: 'input->filter#filter'}, class: 'input filter' %>
          </div>
          <div class="control">
            <%= form.submit 'Search', class: 'button is-primary' %>
          </div>
        </div>
      <% end %>
      <% present_product_module_categories(@product_module_categories, @product_modules).each do |module_category| %>
        <h3 class="title is-3"><%= module_category %></h3>
        <% group_by_category(@product_modules)[module_category].each do |product_module| %>
          <div class="columns is_multiline">
            <div class="column is-one-quarter">
              <%= product_module.name %>
            </div>
          </div>
        <% end %>
      <% end %>
    </div>
  </div>
</section>
